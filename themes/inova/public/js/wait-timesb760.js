"use strict";function _createForOfIteratorHelper(n,t){var a;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(a=_unsupportedIterableToArray(n))||t&&n&&"number"==typeof n.length){a&&(n=a);var e=0,i=function(){};return{s:i,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){a=n[Symbol.iterator]()},n:function(){var n=a.next();return o=n.done,n},e:function(n){s=!0,c=n},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw c}}}}function _unsupportedIterableToArray(n,t){if(n){if("string"==typeof n)return _arrayLikeToArray(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);return"Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(n,t):void 0}}function _arrayLikeToArray(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=n[a];return e}!function(i){var n={init:function(){this.callEndPoint(),this.erWaitTimes()},callEndPoint:function(){var e,n=i('section[role="banner"] .wait-time').attr("data-wait-time-id");n&&(e=Object.getOwnPropertyNames(drupalSettings.locationDetails)[0],i.getJSON("/department/"+n,function(n){var t=""===n.wait_time?"N/A":n.wait_time,a=""===n.wait_time?'<span class="number">N/A</span>':'<span class="number">'.concat(t,'</span><span class="label"> min</span>');i('section[role="banner"] .wait-time .time').append(a).attr("data-locId",e),urgentcareLines.setLocation()}))}};n.erWaitTimes=function(){var n,t,a,M,e,z,O;document.querySelector(".wait-times-container")&&(n=document.querySelector(".wait-times-container"),document.querySelector(".wait-times-container .display"),t=document.querySelector(".wait-times-container .display .grid"),a=document.querySelector(".wait-times-container .display .map"),M=document.querySelector(".wait-times-container .display .map .listing-wrap .items-wrap"),e=n.getAttribute("data-wait-times"),e=parseInt(e),z=drupalSettings.waitTimes[e],(O={organizeSchedule:function(n){for(var t,a=moment().format("dddd").toLowerCase(),e=n.length;e--;)if(a==n[e][0]){t=e;break}for(var i=0;i<t;i++){var c=n.shift();n.push(c)}},convertTime:function(n){var t,a,e;return(n=(n=n/60/60).toString()).includes(".")&&(t=n.split("."),a=parseFloat(t[0]),60<(e=6*parseInt(t[1]))&&((e=e.toString()).split(""),e=e[0]+e[1]+"."+e[2],e=Math.round(e)),n=a+(e*=.01)),"0"===(n=(n=(n=12<=n?12===n?(+n).toFixed(2)+"PM":(n-12).toFixed(2)+"PM":(+n).toFixed(2)+"AM").toString()).split("."))[0]?n[0]="12":(n[0],n[0]),n=n[1].match(/00/)?n[0]+n[1].split(/00/)[1]:"".concat(n[0],":").concat(n[1])},checkIfOpen:function(n,t){var a=new Date,e=60*a.getHours()*60+60*a.getMinutes();return n=parseFloat(n),t=parseFloat(t),null===n?'<span class="closed">Closed</span>':0===n&&86400===t||86400===n&&86400===t?'<span class="open">Open</span> • <span>24HRS</span>':n<=e&&e<=t?(t=O.convertTime(t),'<span class="open">Open</span><span> • Closes at '.concat(t,"</span>")):e<n?(n=O.convertTime(n),'<span class="closed">Closed</span><span> • Opens at '.concat(n,"</span>")):'<span class="closed">Closed</span>'},buildSchedule:function(s){var r="";s.forEach(function(n,t){var a,e,i,c=s[t][0];i=null===s[t][1]?"Closed":null!==s[t][1]&&"0"===s[t][1].from&&"86400"===s[t][1].to||"86400"===s[t][1].from&&"86400"===s[t][1].to?"Open 24HRS":(a=O.convertTime(s[t][1].to),e=O.convertTime(s[t][1].from),"".concat(e,"–").concat(a));var o='<span class="hours">'.concat(c," ").concat(i,"</span>");r=r.concat("",o)});var n=document.createElement("div");return n.insertAdjacentHTML("beforeend",r),n},buildItem:function(I){({scheduleAccordion:function(){i("section.wait-times-container .schedule").hasClass(".initialized")||(i("section.wait-times-container .schedule:not(.initialized) .current-status").on("click",function(n){n.stopPropagation(),i(this).siblings(".hours-wrap").slideToggle("fast"),i(this).toggleClass("active")}),i("section.wait-times-container .schedule:not(.initialized)").addClass("initialized")),i(document).click(function(n){n.stopPropagation(),i(n.target).is("section.wait-times-container .grid .schedule *")||(i("section.wait-times-container .grid .schedule .hours-wrap").slideUp("fast"),i("section.wait-times-container .grid .schedule .current-status").removeClass("active"))})},initialize:function(){z.map(function(n){return n.location}).forEach(function(n,t){var a="<h3>".concat(n.name,"</h3>"),e=null!==(e=n.phone)&&""!==e.replace(/\s/g,"")?'<span class="phone-prefix">Phone: </span><a href="tel:'.concat(e,'" class="phone">').concat(e,"</a>"):"",i=null!==(i=n.fax)&&""!==i.replace(/\s/g,"")?'<span class="fax">Fax: '.concat(i,"</span>"):"",c=null!==(c=n.short_description)&&""!==c.replace(/\s/g,"")?"<div>".concat(c,"</div>"):"",o=n.address,s='<span class="line1">'.concat(o.address_line1,"</span>"),r=o.address_line2;""!==r.replace(/\s/g,"")&&(r='<span class="line2">'.concat(o.address_line2,"</span>"));var l,d,u='<span class="line3">'.concat(o.locality,", ").concat(o.administrative_area," ").concat(o.postal_code,"</span>"),p='<div class="address">'.concat(s," ").concat(r," ").concat(u,"</div>"),m='<a href="'.concat(n.detailsLink,'">See Location Details</a>'),v=I===M?'<a href="'.concat(n.directionsLink,'" target="_blank">Get Directions</a>'):'<a class="btn-more" href="'.concat(n.directionsLink,'" target="_blank">Get Directions</a>'),g=n.image,f=null===g?g="":"has-background";I===M&&(l=n.geolocation.lat,d=n.geolocation.lng);var h=n.schedule,w=[];for(var y in h)w.push([y,h[y]]);O.organizeSchedule(w);var b,L=w[0],S=null!==L[1]?(b=L[1].from,L[1].to):b=void 0,k=O.buildSchedule(w,L,b,S),_=O.checkIfOpen(b,S),k=k.innerHTML,T='<span class="wait-time">\n                                                    '.concat(z[t].waitTime,'<span class="min">MIN</span>\n                                                </span>'),A=I===M?'<div class="item" data-locid="'.concat(n.id,'" data-index="').concat(t,'" data-lat="').concat(l,'" data-lng="').concat(d,'">\n                                                ').concat(a,'\n                                                <div class="content">\n                                                    ').concat(T,'\n                                                    <div class="short-desc">').concat(c,"</div>\n                                                    ").concat(p,"\n                                                    ").concat(v,'\n                                                    <span class="see-details">').concat(m,'</span>\n                                                    <div class="schedule">\n                                                        <div class="current-status">').concat(_,'</div>\n                                                        <div class="hours-wrap">').concat(k,"</div>\n                                                    </div>\n                                                </div>\n                                            </div>"):'<div class="item" data-locid="'.concat(n.id,'" data-index="').concat(t,'">\n                                                <div class="content-container ').concat(f,'" style="background-image: url(\'').concat(g,"'); background-size: cover;\">\n                                                    ").concat(T,'\n                                                    <div class="content">\n                                                        ').concat(a,'\n                                                        <div class="short-desc">').concat(c,"</div>\n                                                        ").concat(p,"\n                                                        ").concat(e,"\n                                                        ").concat(i,"\n                                                        ").concat(v,'\n                                                        <div class="schedule">\n                                                            <div class="current-status">').concat(_,'</div>\n                                                            <div class="hours-wrap">').concat(k,"</div>\n                                                        </div>\n                                                        ").concat(m,"\n                                                    </div>\n                                                </div>\n                                            </div>");I.insertAdjacentHTML("beforeend",A)}),this.scheduleAccordion()}}).initialize()},grid:function(){this.buildItem(t),i("section.wait-times-container .item").matchHeight()},map:function(){({accordion:function(){document.querySelectorAll("section.wait-times-container .map .listing-wrap .item");i("section.wait-times-container .map .listing-wrap .item").on("click",function(){i(this).toggleClass("active"),i(this).siblings().removeClass("active"),i(this).siblings().children(".content").slideUp(),i(this).find(".content").slideToggle()})},googleMap:function(){var s=document.getElementById("waitTimeMap");s&&function(){var n,t,a,e,_=new google.maps.Map(s,{center:{lat:39.0469566,lng:-77.6942945},disableDefaultUI:!0,scrollwheel:!1,zoom:9,zoomControl:!0}),T=new google.maps.InfoWindow({}),i=[],A=z;A.forEach(function(L,S){var k;n=L.location.geolocation.lat,t=L.location.geolocation.lng,a=new google.maps.LatLng(n,t),e=new google.maps.Marker({position:a,map:_,icon:"/themes/inova/public/img/map-marker.png",title:L.location.name}),i.push(e),google.maps.event.addListener(e,"click",(k=e,function(){var n=A[S].location,t="<h3>".concat(A[S].location.name,"</h3>"),a=null!==(a=n.phone)&&""!==a.replace(/\s/g,"")?'<span class="phone-prefix">Phone: </span><a href="tel:'.concat(a,'" class="phone">').concat(a,"</a>"):"",e=null!==(e=n.fax)&&""!==e.replace(/\s/g,"")?'<span class="fax">Fax: '.concat(e,"</span>"):"",i=null!==(i=n.short_description)&&""!==i.replace(/\s/g,"")?"<div>".concat(i,"</div>"):"",c=n.address,o='<span class="line1">'.concat(c.address_line1,"</span>"),s=c.address_line2;""!==s.replace(/\s/g,"")&&(s='<span class="line2">'.concat(c.address_line2,"</span>"));var r='<span class="line3">'.concat(c.locality,", ").concat(c.administrative_area," ").concat(c.postal_code,"</span>"),l='<div class="address">'.concat(o," ").concat(s," ").concat(r,"</div>"),d='<a class="see-more" href="'.concat(L.location.detailsLink,'">See Location Details</a>'),u='<a class="directions" href="'.concat(L.location.directionsLink,'" target="_blank">Get Directions</a>'),p='<span class="wait-time" data-locid="'.concat(L.location.id,'">').concat(L.waitTime,'<span class="min">MIN</span></span>'),m=n.schedule,v=[];for(var g in m)v.push([g,m[g]]);O.organizeSchedule(v);var f,h=v[0],w=null!==h[1]?(f=h[1].from,h[1].to):f=void 0,y=(O.buildSchedule(v,h,f,w),O.checkIfOpen(f,w)),b=urgentcareLines.setMarker(L.location.id);b&&(p=b),T.setContent('<div class="google-info-window">\n                                                    '.concat(t,"\n                                                    ").concat(p,'\n                                                    <div class="short-desc">').concat(i,"</div>\n                                                    ").concat(l,"\n                                                    ").concat(a,"\n                                                    ").concat(e,"\n                                                    ").concat(u,"\n                                                    ").concat(d,'\n                                                    <div class="schedule">\n                                                        <div class="current-status">').concat(y,"</div>\n                                                    </div>\n                                                </div>")),T.open(_,k)}))}),setTimeout(function(){google.maps.event.trigger(i[0],"click")},500);var c,o=_createForOfIteratorHelper(document.querySelectorAll("section.wait-times-container .map .items-wrap .item"));try{for(o.s();!(c=o.n()).done;){c.value.addEventListener("click",function(){var n=this.getAttribute("data-index");google.maps.event.trigger(i[n],"click")})}}catch(n){o.e(n)}finally{o.f()}}()},initialize:function(){O.buildItem(M),this.accordion(),this.googleMap()}}).initialize()},displayOptions:function(){document.querySelector(".wait-times-container .view-controls button.grid").addEventListener("click",function(){n.classList.contains(".grid-active")||(n.classList.add("grid-active"),n.classList.remove("map-active")),t.classList.contains("built")||(this.grid(),t.classList.add("built"))}),document.querySelector(".wait-times-container .view-controls button.map").addEventListener("click",function(){n.classList.contains(".map-active")||(n.classList.add("map-active"),n.classList.remove("grid-active"),urgentcareLines.setMap()),a.classList.contains("built")||(O.map(),a.classList.add("built"))})},initialize:function(){this.displayOptions(),this.grid()}}).initialize())},window.inovaWaitTimes=n}(jQuery);